import cv2
import numpy as np
from matplotlib import pyplot as plt
import urllib.request

url = "https://upload.wikimedia.org/wikipedia/commons/3/3f/Fronalpstock_big.jpg"

headers = {'User-Agent': 'Mozilla/5.0'}
req = urllib.request.Request(url, headers=headers)

resp = urllib.request.urlopen(req)
image_data = np.asarray(bytearray(resp.read()), dtype="uint8")

img = cv2.imdecode(image_data, cv2.IMREAD_COLOR)

if img is None:
    print("Nie udało się wczytać obrazu")
else:
    img_rgb = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)

    colors = ('r','g','b')
    channels = cv2.split(img_rgb)

    plt.figure(figsize=(10,4))

    for chan, col in zip(channels, colors):
        hist = cv2.calcHist([chan], [0], None, [256], [0,256])
        plt.plot(hist, color=col)

    plt.title("Histogram RGB")
    plt.show()

    gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)
    min_val = np.min(gray)
    max_val = np.max(gray)
    contrast = max_val - min_val

    print("minimalna jasność:", min_val)
    print("maksymalna jasność:", max_val)
    print("kontrast:", contrast)

    if contrast < 40:
        print("Ocena: niska jakość")
    elif contrast > 160:
        print("Ocena: dobra jakość")
    else:
        print("Ocena: średnia")
